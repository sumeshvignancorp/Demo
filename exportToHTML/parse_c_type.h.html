<html>
<head>
<title>parse_c_type.h</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
.s0 { color: #bcbec4;}
.s1 { color: #7a7e85;}
.s2 { color: #cf8e6d;}
.s3 { color: #2aacb8;}
</style>
</head>
<body bgcolor="#1e1f22">
<table CELLSPACING=0 CELLPADDING=5 COLS=1 WIDTH="100%" BGCOLOR="#606060" >
<tr><td><center>
<font face="Arial, Helvetica" color="#000000">
parse_c_type.h</font>
</center></td></tr></table>
<pre>
<span class="s1">/* This part is from file 'cffi/parse_c_type.h'.  It is copied at the 
   beginning of C sources generated by CFFI's ffi.set_source(). */</span>

<span class="s2">typedef void </span><span class="s0">*_cffi_opcode_t;</span>

<span class="s2">#define </span><span class="s0">_CFFI_OP(opcode, arg)   (_cffi_opcode_t)(opcode | (((uintptr_t)(arg)) &lt;&lt; </span><span class="s3">8</span><span class="s0">))</span>
<span class="s2">#define </span><span class="s0">_CFFI_GETOP(cffi_opcode)    ((</span><span class="s2">unsigned char</span><span class="s0">)(uintptr_t)cffi_opcode)</span>
<span class="s2">#define </span><span class="s0">_CFFI_GETARG(cffi_opcode)   (((intptr_t)cffi_opcode) &gt;&gt; </span><span class="s3">8</span><span class="s0">)</span>

<span class="s2">#define </span><span class="s0">_CFFI_OP_PRIMITIVE       </span><span class="s3">1</span>
<span class="s2">#define </span><span class="s0">_CFFI_OP_POINTER         </span><span class="s3">3</span>
<span class="s2">#define </span><span class="s0">_CFFI_OP_ARRAY           </span><span class="s3">5</span>
<span class="s2">#define </span><span class="s0">_CFFI_OP_OPEN_ARRAY      </span><span class="s3">7</span>
<span class="s2">#define </span><span class="s0">_CFFI_OP_STRUCT_UNION    </span><span class="s3">9</span>
<span class="s2">#define </span><span class="s0">_CFFI_OP_ENUM           </span><span class="s3">11</span>
<span class="s2">#define </span><span class="s0">_CFFI_OP_FUNCTION       </span><span class="s3">13</span>
<span class="s2">#define </span><span class="s0">_CFFI_OP_FUNCTION_END   </span><span class="s3">15</span>
<span class="s2">#define </span><span class="s0">_CFFI_OP_NOOP           </span><span class="s3">17</span>
<span class="s2">#define </span><span class="s0">_CFFI_OP_BITFIELD       </span><span class="s3">19</span>
<span class="s2">#define </span><span class="s0">_CFFI_OP_TYPENAME       </span><span class="s3">21</span>
<span class="s2">#define </span><span class="s0">_CFFI_OP_CPYTHON_BLTN_V </span><span class="s3">23   </span><span class="s1">// varargs</span>
<span class="s2">#define </span><span class="s0">_CFFI_OP_CPYTHON_BLTN_N </span><span class="s3">25   </span><span class="s1">// noargs</span>
<span class="s2">#define </span><span class="s0">_CFFI_OP_CPYTHON_BLTN_O </span><span class="s3">27   </span><span class="s1">// O  (i.e. a single arg)</span>
<span class="s2">#define </span><span class="s0">_CFFI_OP_CONSTANT       </span><span class="s3">29</span>
<span class="s2">#define </span><span class="s0">_CFFI_OP_CONSTANT_INT   </span><span class="s3">31</span>
<span class="s2">#define </span><span class="s0">_CFFI_OP_GLOBAL_VAR     </span><span class="s3">33</span>
<span class="s2">#define </span><span class="s0">_CFFI_OP_DLOPEN_FUNC    </span><span class="s3">35</span>
<span class="s2">#define </span><span class="s0">_CFFI_OP_DLOPEN_CONST   </span><span class="s3">37</span>
<span class="s2">#define </span><span class="s0">_CFFI_OP_GLOBAL_VAR_F   </span><span class="s3">39</span>
<span class="s2">#define </span><span class="s0">_CFFI_OP_EXTERN_PYTHON  </span><span class="s3">41</span>

<span class="s2">#define </span><span class="s0">_CFFI_PRIM_VOID          </span><span class="s3">0</span>
<span class="s2">#define </span><span class="s0">_CFFI_PRIM_BOOL          </span><span class="s3">1</span>
<span class="s2">#define </span><span class="s0">_CFFI_PRIM_CHAR          </span><span class="s3">2</span>
<span class="s2">#define </span><span class="s0">_CFFI_PRIM_SCHAR         </span><span class="s3">3</span>
<span class="s2">#define </span><span class="s0">_CFFI_PRIM_UCHAR         </span><span class="s3">4</span>
<span class="s2">#define </span><span class="s0">_CFFI_PRIM_SHORT         </span><span class="s3">5</span>
<span class="s2">#define </span><span class="s0">_CFFI_PRIM_USHORT        </span><span class="s3">6</span>
<span class="s2">#define </span><span class="s0">_CFFI_PRIM_INT           </span><span class="s3">7</span>
<span class="s2">#define </span><span class="s0">_CFFI_PRIM_UINT          </span><span class="s3">8</span>
<span class="s2">#define </span><span class="s0">_CFFI_PRIM_LONG          </span><span class="s3">9</span>
<span class="s2">#define </span><span class="s0">_CFFI_PRIM_ULONG        </span><span class="s3">10</span>
<span class="s2">#define </span><span class="s0">_CFFI_PRIM_LONGLONG     </span><span class="s3">11</span>
<span class="s2">#define </span><span class="s0">_CFFI_PRIM_ULONGLONG    </span><span class="s3">12</span>
<span class="s2">#define </span><span class="s0">_CFFI_PRIM_FLOAT        </span><span class="s3">13</span>
<span class="s2">#define </span><span class="s0">_CFFI_PRIM_DOUBLE       </span><span class="s3">14</span>
<span class="s2">#define </span><span class="s0">_CFFI_PRIM_LONGDOUBLE   </span><span class="s3">15</span>

<span class="s2">#define </span><span class="s0">_CFFI_PRIM_WCHAR        </span><span class="s3">16</span>
<span class="s2">#define </span><span class="s0">_CFFI_PRIM_INT8         </span><span class="s3">17</span>
<span class="s2">#define </span><span class="s0">_CFFI_PRIM_UINT8        </span><span class="s3">18</span>
<span class="s2">#define </span><span class="s0">_CFFI_PRIM_INT16        </span><span class="s3">19</span>
<span class="s2">#define </span><span class="s0">_CFFI_PRIM_UINT16       </span><span class="s3">20</span>
<span class="s2">#define </span><span class="s0">_CFFI_PRIM_INT32        </span><span class="s3">21</span>
<span class="s2">#define </span><span class="s0">_CFFI_PRIM_UINT32       </span><span class="s3">22</span>
<span class="s2">#define </span><span class="s0">_CFFI_PRIM_INT64        </span><span class="s3">23</span>
<span class="s2">#define </span><span class="s0">_CFFI_PRIM_UINT64       </span><span class="s3">24</span>
<span class="s2">#define </span><span class="s0">_CFFI_PRIM_INTPTR       </span><span class="s3">25</span>
<span class="s2">#define </span><span class="s0">_CFFI_PRIM_UINTPTR      </span><span class="s3">26</span>
<span class="s2">#define </span><span class="s0">_CFFI_PRIM_PTRDIFF      </span><span class="s3">27</span>
<span class="s2">#define </span><span class="s0">_CFFI_PRIM_SIZE         </span><span class="s3">28</span>
<span class="s2">#define </span><span class="s0">_CFFI_PRIM_SSIZE        </span><span class="s3">29</span>
<span class="s2">#define </span><span class="s0">_CFFI_PRIM_INT_LEAST8   </span><span class="s3">30</span>
<span class="s2">#define </span><span class="s0">_CFFI_PRIM_UINT_LEAST8  </span><span class="s3">31</span>
<span class="s2">#define </span><span class="s0">_CFFI_PRIM_INT_LEAST16  </span><span class="s3">32</span>
<span class="s2">#define </span><span class="s0">_CFFI_PRIM_UINT_LEAST16 </span><span class="s3">33</span>
<span class="s2">#define </span><span class="s0">_CFFI_PRIM_INT_LEAST32  </span><span class="s3">34</span>
<span class="s2">#define </span><span class="s0">_CFFI_PRIM_UINT_LEAST32 </span><span class="s3">35</span>
<span class="s2">#define </span><span class="s0">_CFFI_PRIM_INT_LEAST64  </span><span class="s3">36</span>
<span class="s2">#define </span><span class="s0">_CFFI_PRIM_UINT_LEAST64 </span><span class="s3">37</span>
<span class="s2">#define </span><span class="s0">_CFFI_PRIM_INT_FAST8    </span><span class="s3">38</span>
<span class="s2">#define </span><span class="s0">_CFFI_PRIM_UINT_FAST8   </span><span class="s3">39</span>
<span class="s2">#define </span><span class="s0">_CFFI_PRIM_INT_FAST16   </span><span class="s3">40</span>
<span class="s2">#define </span><span class="s0">_CFFI_PRIM_UINT_FAST16  </span><span class="s3">41</span>
<span class="s2">#define </span><span class="s0">_CFFI_PRIM_INT_FAST32   </span><span class="s3">42</span>
<span class="s2">#define </span><span class="s0">_CFFI_PRIM_UINT_FAST32  </span><span class="s3">43</span>
<span class="s2">#define </span><span class="s0">_CFFI_PRIM_INT_FAST64   </span><span class="s3">44</span>
<span class="s2">#define </span><span class="s0">_CFFI_PRIM_UINT_FAST64  </span><span class="s3">45</span>
<span class="s2">#define </span><span class="s0">_CFFI_PRIM_INTMAX       </span><span class="s3">46</span>
<span class="s2">#define </span><span class="s0">_CFFI_PRIM_UINTMAX      </span><span class="s3">47</span>
<span class="s2">#define </span><span class="s0">_CFFI_PRIM_FLOATCOMPLEX </span><span class="s3">48</span>
<span class="s2">#define </span><span class="s0">_CFFI_PRIM_DOUBLECOMPLEX </span><span class="s3">49</span>
<span class="s2">#define </span><span class="s0">_CFFI_PRIM_CHAR16       </span><span class="s3">50</span>
<span class="s2">#define </span><span class="s0">_CFFI_PRIM_CHAR32       </span><span class="s3">51</span>

<span class="s2">#define </span><span class="s0">_CFFI__NUM_PRIM         </span><span class="s3">52</span>
<span class="s2">#define </span><span class="s0">_CFFI__UNKNOWN_PRIM           (-</span><span class="s3">1</span><span class="s0">)</span>
<span class="s2">#define </span><span class="s0">_CFFI__UNKNOWN_FLOAT_PRIM     (-</span><span class="s3">2</span><span class="s0">)</span>
<span class="s2">#define </span><span class="s0">_CFFI__UNKNOWN_LONG_DOUBLE    (-</span><span class="s3">3</span><span class="s0">)</span>

<span class="s2">#define </span><span class="s0">_CFFI__IO_FILE_STRUCT         (-</span><span class="s3">1</span><span class="s0">)</span>


<span class="s2">struct </span><span class="s0">_cffi_global_s {</span>
    <span class="s2">const char </span><span class="s0">*name;</span>
    <span class="s2">void </span><span class="s0">*address;</span>
    <span class="s0">_cffi_opcode_t type_op;</span>
    <span class="s2">void </span><span class="s0">*size_or_direct_fn;  </span><span class="s1">// OP_GLOBAL_VAR: size, or 0 if unknown</span>
                              <span class="s1">// OP_CPYTHON_BLTN_*: addr of direct function</span>
<span class="s0">};</span>

<span class="s2">struct </span><span class="s0">_cffi_getconst_s {</span>
    <span class="s2">unsigned long long </span><span class="s0">value;</span>
    <span class="s2">const struct </span><span class="s0">_cffi_type_context_s *ctx;</span>
    <span class="s2">int </span><span class="s0">gindex;</span>
<span class="s0">};</span>

<span class="s2">struct </span><span class="s0">_cffi_struct_union_s {</span>
    <span class="s2">const char </span><span class="s0">*name;</span>
    <span class="s2">int </span><span class="s0">type_index;          </span><span class="s1">// -&gt; _cffi_types, on a OP_STRUCT_UNION</span>
    <span class="s2">int </span><span class="s0">flags;               </span><span class="s1">// _CFFI_F_* flags below</span>
    <span class="s0">size_t size;</span>
    <span class="s2">int </span><span class="s0">alignment;</span>
    <span class="s2">int </span><span class="s0">first_field_index;   </span><span class="s1">// -&gt; _cffi_fields array</span>
    <span class="s2">int </span><span class="s0">num_fields;</span>
<span class="s0">};</span>
<span class="s2">#define </span><span class="s0">_CFFI_F_UNION         </span><span class="s3">0x01   </span><span class="s1">// is a union, not a struct</span>
<span class="s2">#define </span><span class="s0">_CFFI_F_CHECK_FIELDS  </span><span class="s3">0x02   </span><span class="s1">// complain if fields are not in the</span>
                                     <span class="s1">// &quot;standard layout&quot; or if some are missing</span>
<span class="s2">#define </span><span class="s0">_CFFI_F_PACKED        </span><span class="s3">0x04   </span><span class="s1">// for CHECK_FIELDS, assume a packed struct</span>
<span class="s2">#define </span><span class="s0">_CFFI_F_EXTERNAL      </span><span class="s3">0x08   </span><span class="s1">// in some other ffi.include()</span>
<span class="s2">#define </span><span class="s0">_CFFI_F_OPAQUE        </span><span class="s3">0x10   </span><span class="s1">// opaque</span>

<span class="s2">struct </span><span class="s0">_cffi_field_s {</span>
    <span class="s2">const char </span><span class="s0">*name;</span>
    <span class="s0">size_t field_offset;</span>
    <span class="s0">size_t field_size;</span>
    <span class="s0">_cffi_opcode_t field_type_op;</span>
<span class="s0">};</span>

<span class="s2">struct </span><span class="s0">_cffi_enum_s {</span>
    <span class="s2">const char </span><span class="s0">*name;</span>
    <span class="s2">int </span><span class="s0">type_index;          </span><span class="s1">// -&gt; _cffi_types, on a OP_ENUM</span>
    <span class="s2">int </span><span class="s0">type_prim;           </span><span class="s1">// _CFFI_PRIM_xxx</span>
    <span class="s2">const char </span><span class="s0">*enumerators; </span><span class="s1">// comma-delimited string</span>
<span class="s0">};</span>

<span class="s2">struct </span><span class="s0">_cffi_typename_s {</span>
    <span class="s2">const char </span><span class="s0">*name;</span>
    <span class="s2">int </span><span class="s0">type_index;   </span><span class="s1">/* if opaque, points to a possibly artificial 
                         OP_STRUCT which is itself opaque */</span>
<span class="s0">};</span>

<span class="s2">struct </span><span class="s0">_cffi_type_context_s {</span>
    <span class="s0">_cffi_opcode_t *types;</span>
    <span class="s2">const struct </span><span class="s0">_cffi_global_s *globals;</span>
    <span class="s2">const struct </span><span class="s0">_cffi_field_s *fields;</span>
    <span class="s2">const struct </span><span class="s0">_cffi_struct_union_s *struct_unions;</span>
    <span class="s2">const struct </span><span class="s0">_cffi_enum_s *enums;</span>
    <span class="s2">const struct </span><span class="s0">_cffi_typename_s *typenames;</span>
    <span class="s2">int </span><span class="s0">num_globals;</span>
    <span class="s2">int </span><span class="s0">num_struct_unions;</span>
    <span class="s2">int </span><span class="s0">num_enums;</span>
    <span class="s2">int </span><span class="s0">num_typenames;</span>
    <span class="s2">const char </span><span class="s0">*</span><span class="s2">const </span><span class="s0">*includes;</span>
    <span class="s2">int </span><span class="s0">num_types;</span>
    <span class="s2">int </span><span class="s0">flags;      </span><span class="s1">/* future extension */</span>
<span class="s0">};</span>

<span class="s2">struct </span><span class="s0">_cffi_parse_info_s {</span>
    <span class="s2">const struct </span><span class="s0">_cffi_type_context_s *ctx;</span>
    <span class="s0">_cffi_opcode_t *output;</span>
    <span class="s2">unsigned int </span><span class="s0">output_size;</span>
    <span class="s0">size_t error_location;</span>
    <span class="s2">const char </span><span class="s0">*error_message;</span>
<span class="s0">};</span>

<span class="s2">struct </span><span class="s0">_cffi_externpy_s {</span>
    <span class="s2">const char </span><span class="s0">*name;</span>
    <span class="s0">size_t size_of_result;</span>
    <span class="s2">void </span><span class="s0">*reserved1, *reserved2;</span>
<span class="s0">};</span>

<span class="s2">#ifdef </span><span class="s0">_CFFI_INTERNAL</span>
<span class="s2">static int </span><span class="s0">parse_c_type(</span><span class="s2">struct </span><span class="s0">_cffi_parse_info_s *info, </span><span class="s2">const char </span><span class="s0">*input);</span>
<span class="s2">static int </span><span class="s0">search_in_globals(</span><span class="s2">const struct </span><span class="s0">_cffi_type_context_s *ctx,</span>
                             <span class="s2">const char </span><span class="s0">*search, size_t search_len);</span>
<span class="s2">static int </span><span class="s0">search_in_struct_unions(</span><span class="s2">const struct </span><span class="s0">_cffi_type_context_s *ctx,</span>
                                   <span class="s2">const char </span><span class="s0">*search, size_t search_len);</span>
<span class="s2">#endif</span>
</pre>
</body>
</html>