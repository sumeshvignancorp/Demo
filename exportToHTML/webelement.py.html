<html>
<head>
<title>webelement.py</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
.s0 { color: #7a7e85;}
.s1 { color: #bcbec4;}
.s2 { color: #cf8e6d;}
.s3 { color: #bcbec4;}
.s4 { color: #6aab73;}
.s5 { color: #2aacb8;}
.s6 { color: #5f826b; font-style: italic;}
</style>
</head>
<body bgcolor="#1e1f22">
<table CELLSPACING=0 CELLPADDING=5 COLS=1 WIDTH="100%" BGCOLOR="#606060" >
<tr><td><center>
<font face="Arial, Helvetica" color="#000000">
webelement.py</font>
</center></td></tr></table>
<pre><span class="s0"># Licensed to the Software Freedom Conservancy (SFC) under one</span>
<span class="s0"># or more contributor license agreements.  See the NOTICE file</span>
<span class="s0"># distributed with this work for additional information</span>
<span class="s0"># regarding copyright ownership.  The SFC licenses this file</span>
<span class="s0"># to you under the Apache License, Version 2.0 (the</span>
<span class="s0"># &quot;License&quot;); you may not use this file except in compliance</span>
<span class="s0"># with the License.  You may obtain a copy of the License at</span>
<span class="s0">#</span>
<span class="s0">#   http://www.apache.org/licenses/LICENSE-2.0</span>
<span class="s0">#</span>
<span class="s0"># Unless required by applicable law or agreed to in writing,</span>
<span class="s0"># software distributed under the License is distributed on an</span>
<span class="s0"># &quot;AS IS&quot; BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY</span>
<span class="s0"># KIND, either express or implied.  See the License for the</span>
<span class="s0"># specific language governing permissions and limitations</span>
<span class="s0"># under the License.</span>
<span class="s2">from </span><span class="s1">__future__ </span><span class="s2">import </span><span class="s1">annotations</span>

<span class="s2">import </span><span class="s1">os</span>
<span class="s2">import </span><span class="s1">pkgutil</span>
<span class="s2">import </span><span class="s1">warnings</span>
<span class="s2">import </span><span class="s1">zipfile</span>
<span class="s2">from </span><span class="s1">abc </span><span class="s2">import </span><span class="s1">ABCMeta</span>
<span class="s2">from </span><span class="s1">base64 </span><span class="s2">import </span><span class="s1">b64decode</span>
<span class="s2">from </span><span class="s1">base64 </span><span class="s2">import </span><span class="s1">encodebytes</span>
<span class="s2">from </span><span class="s1">hashlib </span><span class="s2">import </span><span class="s1">md5 </span><span class="s2">as </span><span class="s1">md5_hash</span>
<span class="s2">from </span><span class="s1">io </span><span class="s2">import </span><span class="s1">BytesIO</span>

<span class="s2">from </span><span class="s1">selenium</span><span class="s3">.</span><span class="s1">common</span><span class="s3">.</span><span class="s1">exceptions </span><span class="s2">import </span><span class="s1">JavascriptException</span>
<span class="s2">from </span><span class="s1">selenium</span><span class="s3">.</span><span class="s1">common</span><span class="s3">.</span><span class="s1">exceptions </span><span class="s2">import </span><span class="s1">WebDriverException</span>
<span class="s2">from </span><span class="s1">selenium</span><span class="s3">.</span><span class="s1">webdriver</span><span class="s3">.</span><span class="s1">common</span><span class="s3">.</span><span class="s1">by </span><span class="s2">import </span><span class="s1">By</span>
<span class="s2">from </span><span class="s1">selenium</span><span class="s3">.</span><span class="s1">webdriver</span><span class="s3">.</span><span class="s1">common</span><span class="s3">.</span><span class="s1">utils </span><span class="s2">import </span><span class="s1">keys_to_typing</span>

<span class="s2">from </span><span class="s3">.</span><span class="s1">command </span><span class="s2">import </span><span class="s1">Command</span>
<span class="s2">from </span><span class="s3">.</span><span class="s1">shadowroot </span><span class="s2">import </span><span class="s1">ShadowRoot</span>

<span class="s0"># TODO: When moving to supporting python 3.9 as the minimum version we can</span>
<span class="s0"># use built in importlib_resources.files.</span>
<span class="s1">getAttribute_js </span><span class="s3">= </span><span class="s2">None</span>
<span class="s1">isDisplayed_js </span><span class="s3">= </span><span class="s2">None</span>


<span class="s2">def </span><span class="s1">_load_js</span><span class="s3">():</span>
    <span class="s2">global </span><span class="s1">getAttribute_js</span>
    <span class="s2">global </span><span class="s1">isDisplayed_js</span>
    <span class="s1">_pkg </span><span class="s3">= </span><span class="s4">&quot;.&quot;</span><span class="s3">.</span><span class="s1">join</span><span class="s3">(</span><span class="s1">__name__</span><span class="s3">.</span><span class="s1">split</span><span class="s3">(</span><span class="s4">&quot;.&quot;</span><span class="s3">)[:-</span><span class="s5">1</span><span class="s3">])</span>
    <span class="s1">getAttribute_js </span><span class="s3">= </span><span class="s1">pkgutil</span><span class="s3">.</span><span class="s1">get_data</span><span class="s3">(</span><span class="s1">_pkg</span><span class="s3">, </span><span class="s4">&quot;getAttribute.js&quot;</span><span class="s3">).</span><span class="s1">decode</span><span class="s3">(</span><span class="s4">&quot;utf8&quot;</span><span class="s3">)</span>
    <span class="s1">isDisplayed_js </span><span class="s3">= </span><span class="s1">pkgutil</span><span class="s3">.</span><span class="s1">get_data</span><span class="s3">(</span><span class="s1">_pkg</span><span class="s3">, </span><span class="s4">&quot;isDisplayed.js&quot;</span><span class="s3">).</span><span class="s1">decode</span><span class="s3">(</span><span class="s4">&quot;utf8&quot;</span><span class="s3">)</span>


<span class="s2">class </span><span class="s1">BaseWebElement</span><span class="s3">(</span><span class="s1">metaclass</span><span class="s3">=</span><span class="s1">ABCMeta</span><span class="s3">):</span>
    <span class="s6">&quot;&quot;&quot;Abstract Base Class for WebElement. 
 
    ABC's will allow custom types to be registered as a WebElement to 
    pass type checks. 
    &quot;&quot;&quot;</span>

    <span class="s2">pass</span>


<span class="s2">class </span><span class="s1">WebElement</span><span class="s3">(</span><span class="s1">BaseWebElement</span><span class="s3">):</span>
    <span class="s6">&quot;&quot;&quot;Represents a DOM element. 
 
    Generally, all interesting operations that interact with a document will be 
    performed through this interface. 
 
    All method calls will do a freshness check to ensure that the element 
    reference is still valid.  This essentially determines whether the 
    element is still attached to the DOM.  If this test fails, then an 
    ``StaleElementReferenceException`` is thrown, and all future calls to this 
    instance will fail. 
    &quot;&quot;&quot;</span>

    <span class="s2">def </span><span class="s1">__init__</span><span class="s3">(</span><span class="s1">self</span><span class="s3">, </span><span class="s1">parent</span><span class="s3">, </span><span class="s1">id_</span><span class="s3">) </span><span class="s1">-&gt; </span><span class="s2">None</span><span class="s3">:</span>
        <span class="s1">self</span><span class="s3">.</span><span class="s1">_parent </span><span class="s3">= </span><span class="s1">parent</span>
        <span class="s1">self</span><span class="s3">.</span><span class="s1">_id </span><span class="s3">= </span><span class="s1">id_</span>

    <span class="s2">def </span><span class="s1">__repr__</span><span class="s3">(</span><span class="s1">self</span><span class="s3">):</span>
        <span class="s2">return </span><span class="s4">f'&lt;</span><span class="s2">{</span><span class="s1">type</span><span class="s3">(</span><span class="s1">self</span><span class="s3">).</span><span class="s1">__module__</span><span class="s2">}</span><span class="s4">.</span><span class="s2">{</span><span class="s1">type</span><span class="s3">(</span><span class="s1">self</span><span class="s3">).</span><span class="s1">__name__</span><span class="s2">} </span><span class="s4">(session=&quot;</span><span class="s2">{</span><span class="s1">self</span><span class="s3">.</span><span class="s1">_parent</span><span class="s3">.</span><span class="s1">session_id</span><span class="s2">}</span><span class="s4">&quot;, element=&quot;</span><span class="s2">{</span><span class="s1">self</span><span class="s3">.</span><span class="s1">_id</span><span class="s2">}</span><span class="s4">&quot;)&gt;'</span>

    <span class="s3">@</span><span class="s1">property</span>
    <span class="s2">def </span><span class="s1">tag_name</span><span class="s3">(</span><span class="s1">self</span><span class="s3">) </span><span class="s1">-&gt; str</span><span class="s3">:</span>
        <span class="s6">&quot;&quot;&quot;This element's ``tagName`` property.&quot;&quot;&quot;</span>
        <span class="s2">return </span><span class="s1">self</span><span class="s3">.</span><span class="s1">_execute</span><span class="s3">(</span><span class="s1">Command</span><span class="s3">.</span><span class="s1">GET_ELEMENT_TAG_NAME</span><span class="s3">)[</span><span class="s4">&quot;value&quot;</span><span class="s3">]</span>

    <span class="s3">@</span><span class="s1">property</span>
    <span class="s2">def </span><span class="s1">text</span><span class="s3">(</span><span class="s1">self</span><span class="s3">) </span><span class="s1">-&gt; str</span><span class="s3">:</span>
        <span class="s6">&quot;&quot;&quot;The text of the element.&quot;&quot;&quot;</span>
        <span class="s2">return </span><span class="s1">self</span><span class="s3">.</span><span class="s1">_execute</span><span class="s3">(</span><span class="s1">Command</span><span class="s3">.</span><span class="s1">GET_ELEMENT_TEXT</span><span class="s3">)[</span><span class="s4">&quot;value&quot;</span><span class="s3">]</span>

    <span class="s2">def </span><span class="s1">click</span><span class="s3">(</span><span class="s1">self</span><span class="s3">) </span><span class="s1">-&gt; </span><span class="s2">None</span><span class="s3">:</span>
        <span class="s6">&quot;&quot;&quot;Clicks the element.&quot;&quot;&quot;</span>
        <span class="s1">self</span><span class="s3">.</span><span class="s1">_execute</span><span class="s3">(</span><span class="s1">Command</span><span class="s3">.</span><span class="s1">CLICK_ELEMENT</span><span class="s3">)</span>

    <span class="s2">def </span><span class="s1">submit</span><span class="s3">(</span><span class="s1">self</span><span class="s3">):</span>
        <span class="s6">&quot;&quot;&quot;Submits a form.&quot;&quot;&quot;</span>
        <span class="s1">script </span><span class="s3">= (</span>
            <span class="s4">&quot;/* submitForm */var form = arguments[0];</span><span class="s2">\n</span><span class="s4">&quot;</span>
            <span class="s4">'while (form.nodeName != &quot;FORM&quot; &amp;&amp; form.parentNode) {</span><span class="s2">\n</span><span class="s4">'</span>
            <span class="s4">&quot;  form = form.parentNode;</span><span class="s2">\n</span><span class="s4">&quot;</span>
            <span class="s4">&quot;}</span><span class="s2">\n</span><span class="s4">&quot;</span>
            <span class="s4">&quot;if (!form) { throw Error('Unable to find containing form element'); }</span><span class="s2">\n</span><span class="s4">&quot;</span>
            <span class="s4">&quot;if (!form.ownerDocument) { throw Error('Unable to find owning document'); }</span><span class="s2">\n</span><span class="s4">&quot;</span>
            <span class="s4">&quot;var e = form.ownerDocument.createEvent('Event');</span><span class="s2">\n</span><span class="s4">&quot;</span>
            <span class="s4">&quot;e.initEvent('submit', true, true);</span><span class="s2">\n</span><span class="s4">&quot;</span>
            <span class="s4">&quot;if (form.dispatchEvent(e)) { HTMLFormElement.prototype.submit.call(form) }</span><span class="s2">\n</span><span class="s4">&quot;</span>
        <span class="s3">)</span>

        <span class="s2">try</span><span class="s3">:</span>
            <span class="s1">self</span><span class="s3">.</span><span class="s1">_parent</span><span class="s3">.</span><span class="s1">execute_script</span><span class="s3">(</span><span class="s1">script</span><span class="s3">, </span><span class="s1">self</span><span class="s3">)</span>
        <span class="s2">except </span><span class="s1">JavascriptException </span><span class="s2">as </span><span class="s1">exc</span><span class="s3">:</span>
            <span class="s2">raise </span><span class="s1">WebDriverException</span><span class="s3">(</span><span class="s4">&quot;To submit an element, it must be nested inside a form element&quot;</span><span class="s3">) </span><span class="s2">from </span><span class="s1">exc</span>

    <span class="s2">def </span><span class="s1">clear</span><span class="s3">(</span><span class="s1">self</span><span class="s3">) </span><span class="s1">-&gt; </span><span class="s2">None</span><span class="s3">:</span>
        <span class="s6">&quot;&quot;&quot;Clears the text if it's a text entry element.&quot;&quot;&quot;</span>
        <span class="s1">self</span><span class="s3">.</span><span class="s1">_execute</span><span class="s3">(</span><span class="s1">Command</span><span class="s3">.</span><span class="s1">CLEAR_ELEMENT</span><span class="s3">)</span>

    <span class="s2">def </span><span class="s1">get_property</span><span class="s3">(</span><span class="s1">self</span><span class="s3">, </span><span class="s1">name</span><span class="s3">) </span><span class="s1">-&gt; str </span><span class="s3">| </span><span class="s1">bool </span><span class="s3">| </span><span class="s1">WebElement </span><span class="s3">| </span><span class="s1">dict</span><span class="s3">:</span>
        <span class="s6">&quot;&quot;&quot;Gets the given property of the element. 
 
        :Args: 
            - name - Name of the property to retrieve. 
 
        :Usage: 
            :: 
 
                text_length = target_element.get_property(&quot;text_length&quot;) 
        &quot;&quot;&quot;</span>
        <span class="s2">try</span><span class="s3">:</span>
            <span class="s2">return </span><span class="s1">self</span><span class="s3">.</span><span class="s1">_execute</span><span class="s3">(</span><span class="s1">Command</span><span class="s3">.</span><span class="s1">GET_ELEMENT_PROPERTY</span><span class="s3">, {</span><span class="s4">&quot;name&quot;</span><span class="s3">: </span><span class="s1">name</span><span class="s3">})[</span><span class="s4">&quot;value&quot;</span><span class="s3">]</span>
        <span class="s2">except </span><span class="s1">WebDriverException</span><span class="s3">:</span>
            <span class="s0"># if we hit an end point that doesn't understand getElementProperty lets fake it</span>
            <span class="s2">return </span><span class="s1">self</span><span class="s3">.</span><span class="s1">parent</span><span class="s3">.</span><span class="s1">execute_script</span><span class="s3">(</span><span class="s4">&quot;return arguments[0][arguments[1]]&quot;</span><span class="s3">, </span><span class="s1">self</span><span class="s3">, </span><span class="s1">name</span><span class="s3">)</span>

    <span class="s2">def </span><span class="s1">get_dom_attribute</span><span class="s3">(</span><span class="s1">self</span><span class="s3">, </span><span class="s1">name</span><span class="s3">) </span><span class="s1">-&gt; str</span><span class="s3">:</span>
        <span class="s6">&quot;&quot;&quot;Gets the given attribute of the element. Unlike 
        :func:`~selenium.webdriver.remote.BaseWebElement.get_attribute`, this 
        method only returns attributes declared in the element's HTML markup. 
 
        :Args: 
            - name - Name of the attribute to retrieve. 
 
        :Usage: 
            :: 
 
                text_length = target_element.get_dom_attribute(&quot;class&quot;) 
        &quot;&quot;&quot;</span>
        <span class="s2">return </span><span class="s1">self</span><span class="s3">.</span><span class="s1">_execute</span><span class="s3">(</span><span class="s1">Command</span><span class="s3">.</span><span class="s1">GET_ELEMENT_ATTRIBUTE</span><span class="s3">, {</span><span class="s4">&quot;name&quot;</span><span class="s3">: </span><span class="s1">name</span><span class="s3">})[</span><span class="s4">&quot;value&quot;</span><span class="s3">]</span>

    <span class="s2">def </span><span class="s1">get_attribute</span><span class="s3">(</span><span class="s1">self</span><span class="s3">, </span><span class="s1">name</span><span class="s3">) </span><span class="s1">-&gt; str </span><span class="s3">| </span><span class="s2">None</span><span class="s3">:</span>
        <span class="s6">&quot;&quot;&quot;Gets the given attribute or property of the element. 
 
        This method will first try to return the value of a property with the 
        given name. If a property with that name doesn't exist, it returns the 
        value of the attribute with the same name. If there's no attribute with 
        that name, ``None`` is returned. 
 
        Values which are considered truthy, that is equals &quot;true&quot; or &quot;false&quot;, 
        are returned as booleans.  All other non-``None`` values are returned 
        as strings.  For attributes or properties which do not exist, ``None`` 
        is returned. 
 
        To obtain the exact value of the attribute or property, 
        use :func:`~selenium.webdriver.remote.BaseWebElement.get_dom_attribute` or 
        :func:`~selenium.webdriver.remote.BaseWebElement.get_property` methods respectively. 
 
        :Args: 
            - name - Name of the attribute/property to retrieve. 
 
        Example:: 
 
            # Check if the &quot;active&quot; CSS class is applied to an element. 
            is_active = &quot;active&quot; in target_element.get_attribute(&quot;class&quot;) 
        &quot;&quot;&quot;</span>
        <span class="s2">if </span><span class="s1">getAttribute_js </span><span class="s2">is None</span><span class="s3">:</span>
            <span class="s1">_load_js</span><span class="s3">()</span>
        <span class="s1">attribute_value </span><span class="s3">= </span><span class="s1">self</span><span class="s3">.</span><span class="s1">parent</span><span class="s3">.</span><span class="s1">execute_script</span><span class="s3">(</span>
            <span class="s4">f&quot;/* getAttribute */return (</span><span class="s2">{</span><span class="s1">getAttribute_js</span><span class="s2">}</span><span class="s4">).apply(null, arguments);&quot;</span><span class="s3">, </span><span class="s1">self</span><span class="s3">, </span><span class="s1">name</span>
        <span class="s3">)</span>
        <span class="s2">return </span><span class="s1">attribute_value</span>

    <span class="s2">def </span><span class="s1">is_selected</span><span class="s3">(</span><span class="s1">self</span><span class="s3">) </span><span class="s1">-&gt; bool</span><span class="s3">:</span>
        <span class="s6">&quot;&quot;&quot;Returns whether the element is selected. 
 
        Can be used to check if a checkbox or radio button is selected. 
        &quot;&quot;&quot;</span>
        <span class="s2">return </span><span class="s1">self</span><span class="s3">.</span><span class="s1">_execute</span><span class="s3">(</span><span class="s1">Command</span><span class="s3">.</span><span class="s1">IS_ELEMENT_SELECTED</span><span class="s3">)[</span><span class="s4">&quot;value&quot;</span><span class="s3">]</span>

    <span class="s2">def </span><span class="s1">is_enabled</span><span class="s3">(</span><span class="s1">self</span><span class="s3">) </span><span class="s1">-&gt; bool</span><span class="s3">:</span>
        <span class="s6">&quot;&quot;&quot;Returns whether the element is enabled.&quot;&quot;&quot;</span>
        <span class="s2">return </span><span class="s1">self</span><span class="s3">.</span><span class="s1">_execute</span><span class="s3">(</span><span class="s1">Command</span><span class="s3">.</span><span class="s1">IS_ELEMENT_ENABLED</span><span class="s3">)[</span><span class="s4">&quot;value&quot;</span><span class="s3">]</span>

    <span class="s2">def </span><span class="s1">send_keys</span><span class="s3">(</span><span class="s1">self</span><span class="s3">, *</span><span class="s1">value</span><span class="s3">) </span><span class="s1">-&gt; </span><span class="s2">None</span><span class="s3">:</span>
        <span class="s6">&quot;&quot;&quot;Simulates typing into the element. 
 
        :Args: 
            - value - A string for typing, or setting form fields.  For setting 
              file inputs, this could be a local file path. 
 
        Use this to send simple key events or to fill out form fields:: 
 
            form_textfield = driver.find_element(By.NAME, 'username') 
            form_textfield.send_keys(&quot;admin&quot;) 
 
        This can also be used to set file inputs. 
 
        :: 
 
            file_input = driver.find_element(By.NAME, 'profilePic') 
            file_input.send_keys(&quot;path/to/profilepic.gif&quot;) 
            # Generally it's better to wrap the file path in one of the methods 
            # in os.path to return the actual path to support cross OS testing. 
            # file_input.send_keys(os.path.abspath(&quot;path/to/profilepic.gif&quot;)) 
        &quot;&quot;&quot;</span>
        <span class="s0"># transfer file to another machine only if remote driver is used</span>
        <span class="s0"># the same behaviour as for java binding</span>
        <span class="s2">if </span><span class="s1">self</span><span class="s3">.</span><span class="s1">parent</span><span class="s3">.</span><span class="s1">_is_remote</span><span class="s3">:</span>
            <span class="s1">local_files </span><span class="s3">= </span><span class="s1">list</span><span class="s3">(</span>
                <span class="s1">map</span><span class="s3">(</span>
                    <span class="s2">lambda </span><span class="s1">keys_to_send</span><span class="s3">: </span><span class="s1">self</span><span class="s3">.</span><span class="s1">parent</span><span class="s3">.</span><span class="s1">file_detector</span><span class="s3">.</span><span class="s1">is_local_file</span><span class="s3">(</span><span class="s1">str</span><span class="s3">(</span><span class="s1">keys_to_send</span><span class="s3">)),</span>
                    <span class="s4">&quot;&quot;</span><span class="s3">.</span><span class="s1">join</span><span class="s3">(</span><span class="s1">map</span><span class="s3">(</span><span class="s1">str</span><span class="s3">, </span><span class="s1">value</span><span class="s3">)).</span><span class="s1">split</span><span class="s3">(</span><span class="s4">&quot;</span><span class="s2">\n</span><span class="s4">&quot;</span><span class="s3">),</span>
                <span class="s3">)</span>
            <span class="s3">)</span>
            <span class="s2">if None not in </span><span class="s1">local_files</span><span class="s3">:</span>
                <span class="s1">remote_files </span><span class="s3">= []</span>
                <span class="s2">for </span><span class="s1">file </span><span class="s2">in </span><span class="s1">local_files</span><span class="s3">:</span>
                    <span class="s1">remote_files</span><span class="s3">.</span><span class="s1">append</span><span class="s3">(</span><span class="s1">self</span><span class="s3">.</span><span class="s1">_upload</span><span class="s3">(</span><span class="s1">file</span><span class="s3">))</span>
                <span class="s1">value </span><span class="s3">= </span><span class="s4">&quot;</span><span class="s2">\n</span><span class="s4">&quot;</span><span class="s3">.</span><span class="s1">join</span><span class="s3">(</span><span class="s1">remote_files</span><span class="s3">)</span>

        <span class="s1">self</span><span class="s3">.</span><span class="s1">_execute</span><span class="s3">(</span>
            <span class="s1">Command</span><span class="s3">.</span><span class="s1">SEND_KEYS_TO_ELEMENT</span><span class="s3">, {</span><span class="s4">&quot;text&quot;</span><span class="s3">: </span><span class="s4">&quot;&quot;</span><span class="s3">.</span><span class="s1">join</span><span class="s3">(</span><span class="s1">keys_to_typing</span><span class="s3">(</span><span class="s1">value</span><span class="s3">)), </span><span class="s4">&quot;value&quot;</span><span class="s3">: </span><span class="s1">keys_to_typing</span><span class="s3">(</span><span class="s1">value</span><span class="s3">)}</span>
        <span class="s3">)</span>

    <span class="s3">@</span><span class="s1">property</span>
    <span class="s2">def </span><span class="s1">shadow_root</span><span class="s3">(</span><span class="s1">self</span><span class="s3">) </span><span class="s1">-&gt; ShadowRoot</span><span class="s3">:</span>
        <span class="s6">&quot;&quot;&quot;Returns a shadow root of the element if there is one or an error. 
        Only works from Chromium 96, Firefox 96, and Safari 16.4 onwards. 
 
        :Returns: 
          - ShadowRoot object or 
          - NoSuchShadowRoot - if no shadow root was attached to element 
        &quot;&quot;&quot;</span>
        <span class="s2">return </span><span class="s1">self</span><span class="s3">.</span><span class="s1">_execute</span><span class="s3">(</span><span class="s1">Command</span><span class="s3">.</span><span class="s1">GET_SHADOW_ROOT</span><span class="s3">)[</span><span class="s4">&quot;value&quot;</span><span class="s3">]</span>

    <span class="s0"># RenderedWebElement Items</span>
    <span class="s2">def </span><span class="s1">is_displayed</span><span class="s3">(</span><span class="s1">self</span><span class="s3">) </span><span class="s1">-&gt; bool</span><span class="s3">:</span>
        <span class="s6">&quot;&quot;&quot;Whether the element is visible to a user.&quot;&quot;&quot;</span>
        <span class="s0"># Only go into this conditional for browsers that don't use the atom themselves</span>
        <span class="s2">if </span><span class="s1">isDisplayed_js </span><span class="s2">is None</span><span class="s3">:</span>
            <span class="s1">_load_js</span><span class="s3">()</span>
        <span class="s2">return </span><span class="s1">self</span><span class="s3">.</span><span class="s1">parent</span><span class="s3">.</span><span class="s1">execute_script</span><span class="s3">(</span><span class="s4">f&quot;/* isDisplayed */return (</span><span class="s2">{</span><span class="s1">isDisplayed_js</span><span class="s2">}</span><span class="s4">).apply(null, arguments);&quot;</span><span class="s3">, </span><span class="s1">self</span><span class="s3">)</span>

    <span class="s3">@</span><span class="s1">property</span>
    <span class="s2">def </span><span class="s1">location_once_scrolled_into_view</span><span class="s3">(</span><span class="s1">self</span><span class="s3">) </span><span class="s1">-&gt; dict</span><span class="s3">:</span>
        <span class="s6">&quot;&quot;&quot;THIS PROPERTY MAY CHANGE WITHOUT WARNING. Use this to discover where 
        on the screen an element is so that we can click it. This method should 
        cause the element to be scrolled into view. 
 
        Returns the top lefthand corner location on the screen, or zero 
        coordinates if the element is not visible. 
        &quot;&quot;&quot;</span>
        <span class="s1">old_loc </span><span class="s3">= </span><span class="s1">self</span><span class="s3">.</span><span class="s1">_execute</span><span class="s3">(</span>
            <span class="s1">Command</span><span class="s3">.</span><span class="s1">W3C_EXECUTE_SCRIPT</span><span class="s3">,</span>
            <span class="s3">{</span>
                <span class="s4">&quot;script&quot;</span><span class="s3">: </span><span class="s4">&quot;arguments[0].scrollIntoView(true); return arguments[0].getBoundingClientRect()&quot;</span><span class="s3">,</span>
                <span class="s4">&quot;args&quot;</span><span class="s3">: [</span><span class="s1">self</span><span class="s3">],</span>
            <span class="s3">},</span>
        <span class="s3">)[</span><span class="s4">&quot;value&quot;</span><span class="s3">]</span>
        <span class="s2">return </span><span class="s3">{</span><span class="s4">&quot;x&quot;</span><span class="s3">: </span><span class="s1">round</span><span class="s3">(</span><span class="s1">old_loc</span><span class="s3">[</span><span class="s4">&quot;x&quot;</span><span class="s3">]), </span><span class="s4">&quot;y&quot;</span><span class="s3">: </span><span class="s1">round</span><span class="s3">(</span><span class="s1">old_loc</span><span class="s3">[</span><span class="s4">&quot;y&quot;</span><span class="s3">])}</span>

    <span class="s3">@</span><span class="s1">property</span>
    <span class="s2">def </span><span class="s1">size</span><span class="s3">(</span><span class="s1">self</span><span class="s3">) </span><span class="s1">-&gt; dict</span><span class="s3">:</span>
        <span class="s6">&quot;&quot;&quot;The size of the element.&quot;&quot;&quot;</span>
        <span class="s1">size </span><span class="s3">= </span><span class="s1">self</span><span class="s3">.</span><span class="s1">_execute</span><span class="s3">(</span><span class="s1">Command</span><span class="s3">.</span><span class="s1">GET_ELEMENT_RECT</span><span class="s3">)[</span><span class="s4">&quot;value&quot;</span><span class="s3">]</span>
        <span class="s1">new_size </span><span class="s3">= {</span><span class="s4">&quot;height&quot;</span><span class="s3">: </span><span class="s1">size</span><span class="s3">[</span><span class="s4">&quot;height&quot;</span><span class="s3">], </span><span class="s4">&quot;width&quot;</span><span class="s3">: </span><span class="s1">size</span><span class="s3">[</span><span class="s4">&quot;width&quot;</span><span class="s3">]}</span>
        <span class="s2">return </span><span class="s1">new_size</span>

    <span class="s2">def </span><span class="s1">value_of_css_property</span><span class="s3">(</span><span class="s1">self</span><span class="s3">, </span><span class="s1">property_name</span><span class="s3">) </span><span class="s1">-&gt; str</span><span class="s3">:</span>
        <span class="s6">&quot;&quot;&quot;The value of a CSS property.&quot;&quot;&quot;</span>
        <span class="s2">return </span><span class="s1">self</span><span class="s3">.</span><span class="s1">_execute</span><span class="s3">(</span><span class="s1">Command</span><span class="s3">.</span><span class="s1">GET_ELEMENT_VALUE_OF_CSS_PROPERTY</span><span class="s3">, {</span><span class="s4">&quot;propertyName&quot;</span><span class="s3">: </span><span class="s1">property_name</span><span class="s3">})[</span><span class="s4">&quot;value&quot;</span><span class="s3">]</span>

    <span class="s3">@</span><span class="s1">property</span>
    <span class="s2">def </span><span class="s1">location</span><span class="s3">(</span><span class="s1">self</span><span class="s3">) </span><span class="s1">-&gt; dict</span><span class="s3">:</span>
        <span class="s6">&quot;&quot;&quot;The location of the element in the renderable canvas.&quot;&quot;&quot;</span>
        <span class="s1">old_loc </span><span class="s3">= </span><span class="s1">self</span><span class="s3">.</span><span class="s1">_execute</span><span class="s3">(</span><span class="s1">Command</span><span class="s3">.</span><span class="s1">GET_ELEMENT_RECT</span><span class="s3">)[</span><span class="s4">&quot;value&quot;</span><span class="s3">]</span>
        <span class="s1">new_loc </span><span class="s3">= {</span><span class="s4">&quot;x&quot;</span><span class="s3">: </span><span class="s1">round</span><span class="s3">(</span><span class="s1">old_loc</span><span class="s3">[</span><span class="s4">&quot;x&quot;</span><span class="s3">]), </span><span class="s4">&quot;y&quot;</span><span class="s3">: </span><span class="s1">round</span><span class="s3">(</span><span class="s1">old_loc</span><span class="s3">[</span><span class="s4">&quot;y&quot;</span><span class="s3">])}</span>
        <span class="s2">return </span><span class="s1">new_loc</span>

    <span class="s3">@</span><span class="s1">property</span>
    <span class="s2">def </span><span class="s1">rect</span><span class="s3">(</span><span class="s1">self</span><span class="s3">) </span><span class="s1">-&gt; dict</span><span class="s3">:</span>
        <span class="s6">&quot;&quot;&quot;A dictionary with the size and location of the element.&quot;&quot;&quot;</span>
        <span class="s2">return </span><span class="s1">self</span><span class="s3">.</span><span class="s1">_execute</span><span class="s3">(</span><span class="s1">Command</span><span class="s3">.</span><span class="s1">GET_ELEMENT_RECT</span><span class="s3">)[</span><span class="s4">&quot;value&quot;</span><span class="s3">]</span>

    <span class="s3">@</span><span class="s1">property</span>
    <span class="s2">def </span><span class="s1">aria_role</span><span class="s3">(</span><span class="s1">self</span><span class="s3">) </span><span class="s1">-&gt; str</span><span class="s3">:</span>
        <span class="s6">&quot;&quot;&quot;Returns the ARIA role of the current web element.&quot;&quot;&quot;</span>
        <span class="s2">return </span><span class="s1">self</span><span class="s3">.</span><span class="s1">_execute</span><span class="s3">(</span><span class="s1">Command</span><span class="s3">.</span><span class="s1">GET_ELEMENT_ARIA_ROLE</span><span class="s3">)[</span><span class="s4">&quot;value&quot;</span><span class="s3">]</span>

    <span class="s3">@</span><span class="s1">property</span>
    <span class="s2">def </span><span class="s1">accessible_name</span><span class="s3">(</span><span class="s1">self</span><span class="s3">) </span><span class="s1">-&gt; str</span><span class="s3">:</span>
        <span class="s6">&quot;&quot;&quot;Returns the ARIA Level of the current webelement.&quot;&quot;&quot;</span>
        <span class="s2">return </span><span class="s1">self</span><span class="s3">.</span><span class="s1">_execute</span><span class="s3">(</span><span class="s1">Command</span><span class="s3">.</span><span class="s1">GET_ELEMENT_ARIA_LABEL</span><span class="s3">)[</span><span class="s4">&quot;value&quot;</span><span class="s3">]</span>

    <span class="s3">@</span><span class="s1">property</span>
    <span class="s2">def </span><span class="s1">screenshot_as_base64</span><span class="s3">(</span><span class="s1">self</span><span class="s3">) </span><span class="s1">-&gt; str</span><span class="s3">:</span>
        <span class="s6">&quot;&quot;&quot;Gets the screenshot of the current element as a base64 encoded 
        string. 
 
        :Usage: 
            :: 
 
                img_b64 = element.screenshot_as_base64 
        &quot;&quot;&quot;</span>
        <span class="s2">return </span><span class="s1">self</span><span class="s3">.</span><span class="s1">_execute</span><span class="s3">(</span><span class="s1">Command</span><span class="s3">.</span><span class="s1">ELEMENT_SCREENSHOT</span><span class="s3">)[</span><span class="s4">&quot;value&quot;</span><span class="s3">]</span>

    <span class="s3">@</span><span class="s1">property</span>
    <span class="s2">def </span><span class="s1">screenshot_as_png</span><span class="s3">(</span><span class="s1">self</span><span class="s3">) </span><span class="s1">-&gt; bytes</span><span class="s3">:</span>
        <span class="s6">&quot;&quot;&quot;Gets the screenshot of the current element as a binary data. 
 
        :Usage: 
            :: 
 
                element_png = element.screenshot_as_png 
        &quot;&quot;&quot;</span>
        <span class="s2">return </span><span class="s1">b64decode</span><span class="s3">(</span><span class="s1">self</span><span class="s3">.</span><span class="s1">screenshot_as_base64</span><span class="s3">.</span><span class="s1">encode</span><span class="s3">(</span><span class="s4">&quot;ascii&quot;</span><span class="s3">))</span>

    <span class="s2">def </span><span class="s1">screenshot</span><span class="s3">(</span><span class="s1">self</span><span class="s3">, </span><span class="s1">filename</span><span class="s3">) </span><span class="s1">-&gt; bool</span><span class="s3">:</span>
        <span class="s6">&quot;&quot;&quot;Saves a screenshot of the current element to a PNG image file. 
        Returns False if there is any IOError, else returns True. Use full 
        paths in your filename. 
 
        :Args: 
         - filename: The full path you wish to save your screenshot to. This 
           should end with a `.png` extension. 
 
        :Usage: 
            :: 
 
                element.screenshot('/Screenshots/foo.png') 
        &quot;&quot;&quot;</span>
        <span class="s2">if not </span><span class="s1">filename</span><span class="s3">.</span><span class="s1">lower</span><span class="s3">().</span><span class="s1">endswith</span><span class="s3">(</span><span class="s4">&quot;.png&quot;</span><span class="s3">):</span>
            <span class="s1">warnings</span><span class="s3">.</span><span class="s1">warn</span><span class="s3">(</span>
                <span class="s4">&quot;name used for saved screenshot does not match file type. It should end with a `.png` extension&quot;</span><span class="s3">,</span>
                <span class="s1">UserWarning</span><span class="s3">,</span>
            <span class="s3">)</span>
        <span class="s1">png </span><span class="s3">= </span><span class="s1">self</span><span class="s3">.</span><span class="s1">screenshot_as_png</span>
        <span class="s2">try</span><span class="s3">:</span>
            <span class="s2">with </span><span class="s1">open</span><span class="s3">(</span><span class="s1">filename</span><span class="s3">, </span><span class="s4">&quot;wb&quot;</span><span class="s3">) </span><span class="s2">as </span><span class="s1">f</span><span class="s3">:</span>
                <span class="s1">f</span><span class="s3">.</span><span class="s1">write</span><span class="s3">(</span><span class="s1">png</span><span class="s3">)</span>
        <span class="s2">except </span><span class="s1">OSError</span><span class="s3">:</span>
            <span class="s2">return False</span>
        <span class="s2">finally</span><span class="s3">:</span>
            <span class="s2">del </span><span class="s1">png</span>
        <span class="s2">return True</span>

    <span class="s3">@</span><span class="s1">property</span>
    <span class="s2">def </span><span class="s1">parent</span><span class="s3">(</span><span class="s1">self</span><span class="s3">):</span>
        <span class="s6">&quot;&quot;&quot;Internal reference to the WebDriver instance this element was found 
        from.&quot;&quot;&quot;</span>
        <span class="s2">return </span><span class="s1">self</span><span class="s3">.</span><span class="s1">_parent</span>

    <span class="s3">@</span><span class="s1">property</span>
    <span class="s2">def </span><span class="s1">id</span><span class="s3">(</span><span class="s1">self</span><span class="s3">) </span><span class="s1">-&gt; str</span><span class="s3">:</span>
        <span class="s6">&quot;&quot;&quot;Internal ID used by selenium. 
 
        This is mainly for internal use. Simple use cases such as checking if 2 
        webelements refer to the same element, can be done using ``==``:: 
 
            if element1 == element2: 
                print(&quot;These 2 are equal&quot;) 
        &quot;&quot;&quot;</span>
        <span class="s2">return </span><span class="s1">self</span><span class="s3">.</span><span class="s1">_id</span>

    <span class="s2">def </span><span class="s1">__eq__</span><span class="s3">(</span><span class="s1">self</span><span class="s3">, </span><span class="s1">element</span><span class="s3">):</span>
        <span class="s2">return </span><span class="s1">hasattr</span><span class="s3">(</span><span class="s1">element</span><span class="s3">, </span><span class="s4">&quot;id&quot;</span><span class="s3">) </span><span class="s2">and </span><span class="s1">self</span><span class="s3">.</span><span class="s1">_id </span><span class="s3">== </span><span class="s1">element</span><span class="s3">.</span><span class="s1">id</span>

    <span class="s2">def </span><span class="s1">__ne__</span><span class="s3">(</span><span class="s1">self</span><span class="s3">, </span><span class="s1">element</span><span class="s3">):</span>
        <span class="s2">return not </span><span class="s1">self</span><span class="s3">.</span><span class="s1">__eq__</span><span class="s3">(</span><span class="s1">element</span><span class="s3">)</span>

    <span class="s0"># Private Methods</span>
    <span class="s2">def </span><span class="s1">_execute</span><span class="s3">(</span><span class="s1">self</span><span class="s3">, </span><span class="s1">command</span><span class="s3">, </span><span class="s1">params</span><span class="s3">=</span><span class="s2">None</span><span class="s3">):</span>
        <span class="s6">&quot;&quot;&quot;Executes a command against the underlying HTML element. 
 
        Args: 
          command: The name of the command to _execute as a string. 
          params: A dictionary of named parameters to send with the command. 
 
        Returns: 
          The command's JSON response loaded into a dictionary object. 
        &quot;&quot;&quot;</span>
        <span class="s2">if not </span><span class="s1">params</span><span class="s3">:</span>
            <span class="s1">params </span><span class="s3">= {}</span>
        <span class="s1">params</span><span class="s3">[</span><span class="s4">&quot;id&quot;</span><span class="s3">] = </span><span class="s1">self</span><span class="s3">.</span><span class="s1">_id</span>
        <span class="s2">return </span><span class="s1">self</span><span class="s3">.</span><span class="s1">_parent</span><span class="s3">.</span><span class="s1">execute</span><span class="s3">(</span><span class="s1">command</span><span class="s3">, </span><span class="s1">params</span><span class="s3">)</span>

    <span class="s2">def </span><span class="s1">find_element</span><span class="s3">(</span><span class="s1">self</span><span class="s3">, </span><span class="s1">by</span><span class="s3">=</span><span class="s1">By</span><span class="s3">.</span><span class="s1">ID</span><span class="s3">, </span><span class="s1">value</span><span class="s3">=</span><span class="s2">None</span><span class="s3">) </span><span class="s1">-&gt; WebElement</span><span class="s3">:</span>
        <span class="s6">&quot;&quot;&quot;Find an element given a By strategy and locator. 
 
        :Usage: 
            :: 
 
                element = element.find_element(By.ID, 'foo') 
 
        :rtype: WebElement 
        &quot;&quot;&quot;</span>
        <span class="s2">if </span><span class="s1">by </span><span class="s3">== </span><span class="s1">By</span><span class="s3">.</span><span class="s1">ID</span><span class="s3">:</span>
            <span class="s1">by </span><span class="s3">= </span><span class="s1">By</span><span class="s3">.</span><span class="s1">CSS_SELECTOR</span>
            <span class="s1">value </span><span class="s3">= </span><span class="s4">f'[id=&quot;</span><span class="s2">{</span><span class="s1">value</span><span class="s2">}</span><span class="s4">&quot;]'</span>
        <span class="s2">elif </span><span class="s1">by </span><span class="s3">== </span><span class="s1">By</span><span class="s3">.</span><span class="s1">CLASS_NAME</span><span class="s3">:</span>
            <span class="s1">by </span><span class="s3">= </span><span class="s1">By</span><span class="s3">.</span><span class="s1">CSS_SELECTOR</span>
            <span class="s1">value </span><span class="s3">= </span><span class="s4">f&quot;.</span><span class="s2">{</span><span class="s1">value</span><span class="s2">}</span><span class="s4">&quot;</span>
        <span class="s2">elif </span><span class="s1">by </span><span class="s3">== </span><span class="s1">By</span><span class="s3">.</span><span class="s1">NAME</span><span class="s3">:</span>
            <span class="s1">by </span><span class="s3">= </span><span class="s1">By</span><span class="s3">.</span><span class="s1">CSS_SELECTOR</span>
            <span class="s1">value </span><span class="s3">= </span><span class="s4">f'[name=&quot;</span><span class="s2">{</span><span class="s1">value</span><span class="s2">}</span><span class="s4">&quot;]'</span>

        <span class="s2">return </span><span class="s1">self</span><span class="s3">.</span><span class="s1">_execute</span><span class="s3">(</span><span class="s1">Command</span><span class="s3">.</span><span class="s1">FIND_CHILD_ELEMENT</span><span class="s3">, {</span><span class="s4">&quot;using&quot;</span><span class="s3">: </span><span class="s1">by</span><span class="s3">, </span><span class="s4">&quot;value&quot;</span><span class="s3">: </span><span class="s1">value</span><span class="s3">})[</span><span class="s4">&quot;value&quot;</span><span class="s3">]</span>

    <span class="s2">def </span><span class="s1">find_elements</span><span class="s3">(</span><span class="s1">self</span><span class="s3">, </span><span class="s1">by</span><span class="s3">=</span><span class="s1">By</span><span class="s3">.</span><span class="s1">ID</span><span class="s3">, </span><span class="s1">value</span><span class="s3">=</span><span class="s2">None</span><span class="s3">) </span><span class="s1">-&gt; list</span><span class="s3">[</span><span class="s1">WebElement</span><span class="s3">]:</span>
        <span class="s6">&quot;&quot;&quot;Find elements given a By strategy and locator. 
 
        :Usage: 
            :: 
 
                element = element.find_elements(By.CLASS_NAME, 'foo') 
 
        :rtype: list of WebElement 
        &quot;&quot;&quot;</span>
        <span class="s2">if </span><span class="s1">by </span><span class="s3">== </span><span class="s1">By</span><span class="s3">.</span><span class="s1">ID</span><span class="s3">:</span>
            <span class="s1">by </span><span class="s3">= </span><span class="s1">By</span><span class="s3">.</span><span class="s1">CSS_SELECTOR</span>
            <span class="s1">value </span><span class="s3">= </span><span class="s4">f'[id=&quot;</span><span class="s2">{</span><span class="s1">value</span><span class="s2">}</span><span class="s4">&quot;]'</span>
        <span class="s2">elif </span><span class="s1">by </span><span class="s3">== </span><span class="s1">By</span><span class="s3">.</span><span class="s1">CLASS_NAME</span><span class="s3">:</span>
            <span class="s1">by </span><span class="s3">= </span><span class="s1">By</span><span class="s3">.</span><span class="s1">CSS_SELECTOR</span>
            <span class="s1">value </span><span class="s3">= </span><span class="s4">f&quot;.</span><span class="s2">{</span><span class="s1">value</span><span class="s2">}</span><span class="s4">&quot;</span>
        <span class="s2">elif </span><span class="s1">by </span><span class="s3">== </span><span class="s1">By</span><span class="s3">.</span><span class="s1">NAME</span><span class="s3">:</span>
            <span class="s1">by </span><span class="s3">= </span><span class="s1">By</span><span class="s3">.</span><span class="s1">CSS_SELECTOR</span>
            <span class="s1">value </span><span class="s3">= </span><span class="s4">f'[name=&quot;</span><span class="s2">{</span><span class="s1">value</span><span class="s2">}</span><span class="s4">&quot;]'</span>

        <span class="s2">return </span><span class="s1">self</span><span class="s3">.</span><span class="s1">_execute</span><span class="s3">(</span><span class="s1">Command</span><span class="s3">.</span><span class="s1">FIND_CHILD_ELEMENTS</span><span class="s3">, {</span><span class="s4">&quot;using&quot;</span><span class="s3">: </span><span class="s1">by</span><span class="s3">, </span><span class="s4">&quot;value&quot;</span><span class="s3">: </span><span class="s1">value</span><span class="s3">})[</span><span class="s4">&quot;value&quot;</span><span class="s3">]</span>

    <span class="s2">def </span><span class="s1">__hash__</span><span class="s3">(</span><span class="s1">self</span><span class="s3">) </span><span class="s1">-&gt; int</span><span class="s3">:</span>
        <span class="s2">return </span><span class="s1">int</span><span class="s3">(</span><span class="s1">md5_hash</span><span class="s3">(</span><span class="s1">self</span><span class="s3">.</span><span class="s1">_id</span><span class="s3">.</span><span class="s1">encode</span><span class="s3">(</span><span class="s4">&quot;utf-8&quot;</span><span class="s3">)).</span><span class="s1">hexdigest</span><span class="s3">(), </span><span class="s5">16</span><span class="s3">)</span>

    <span class="s2">def </span><span class="s1">_upload</span><span class="s3">(</span><span class="s1">self</span><span class="s3">, </span><span class="s1">filename</span><span class="s3">):</span>
        <span class="s1">fp </span><span class="s3">= </span><span class="s1">BytesIO</span><span class="s3">()</span>
        <span class="s1">zipped </span><span class="s3">= </span><span class="s1">zipfile</span><span class="s3">.</span><span class="s1">ZipFile</span><span class="s3">(</span><span class="s1">fp</span><span class="s3">, </span><span class="s4">&quot;w&quot;</span><span class="s3">, </span><span class="s1">zipfile</span><span class="s3">.</span><span class="s1">ZIP_DEFLATED</span><span class="s3">)</span>
        <span class="s1">zipped</span><span class="s3">.</span><span class="s1">write</span><span class="s3">(</span><span class="s1">filename</span><span class="s3">, </span><span class="s1">os</span><span class="s3">.</span><span class="s1">path</span><span class="s3">.</span><span class="s1">split</span><span class="s3">(</span><span class="s1">filename</span><span class="s3">)[</span><span class="s5">1</span><span class="s3">])</span>
        <span class="s1">zipped</span><span class="s3">.</span><span class="s1">close</span><span class="s3">()</span>
        <span class="s1">content </span><span class="s3">= </span><span class="s1">encodebytes</span><span class="s3">(</span><span class="s1">fp</span><span class="s3">.</span><span class="s1">getvalue</span><span class="s3">())</span>
        <span class="s2">if not </span><span class="s1">isinstance</span><span class="s3">(</span><span class="s1">content</span><span class="s3">, </span><span class="s1">str</span><span class="s3">):</span>
            <span class="s1">content </span><span class="s3">= </span><span class="s1">content</span><span class="s3">.</span><span class="s1">decode</span><span class="s3">(</span><span class="s4">&quot;utf-8&quot;</span><span class="s3">)</span>
        <span class="s2">try</span><span class="s3">:</span>
            <span class="s2">return </span><span class="s1">self</span><span class="s3">.</span><span class="s1">_execute</span><span class="s3">(</span><span class="s1">Command</span><span class="s3">.</span><span class="s1">UPLOAD_FILE</span><span class="s3">, {</span><span class="s4">&quot;file&quot;</span><span class="s3">: </span><span class="s1">content</span><span class="s3">})[</span><span class="s4">&quot;value&quot;</span><span class="s3">]</span>
        <span class="s2">except </span><span class="s1">WebDriverException </span><span class="s2">as </span><span class="s1">e</span><span class="s3">:</span>
            <span class="s2">if </span><span class="s4">&quot;Unrecognized command: POST&quot; </span><span class="s2">in </span><span class="s1">str</span><span class="s3">(</span><span class="s1">e</span><span class="s3">):</span>
                <span class="s2">return </span><span class="s1">filename</span>
            <span class="s2">if </span><span class="s4">&quot;Command not found: POST &quot; </span><span class="s2">in </span><span class="s1">str</span><span class="s3">(</span><span class="s1">e</span><span class="s3">):</span>
                <span class="s2">return </span><span class="s1">filename</span>
            <span class="s2">if </span><span class="s4">'{&quot;status&quot;:405,&quot;value&quot;:[&quot;GET&quot;,&quot;HEAD&quot;,&quot;DELETE&quot;]}' </span><span class="s2">in </span><span class="s1">str</span><span class="s3">(</span><span class="s1">e</span><span class="s3">):</span>
                <span class="s2">return </span><span class="s1">filename</span>
            <span class="s2">raise</span>
</pre>
</body>
</html>